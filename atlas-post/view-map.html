{{- $mapTiles := .MapTiles -}}
{{- $location := .Location -}}

<div id="map" class="width-100% square"></div>

<div class="h-geo">
	<data id="longitude" class="p-longitude" value="{{$location.Longitude}}"></data>
	<data id="latitude" class="p-latitude" value="{{$location.Latitude}}"></data>
</div>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
	integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
	crossorigin=""/>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
	integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
	crossorigin="">
</script>

<script>
	var zoom=16;
	var longitude = parseFloat(document.getElementById("longitude").value);
	var latitude = parseFloat(document.getElementById("latitude").value);
	var latLng = L.latLng(latitude, longitude)

	var map = L.map('map')
	map.setView(latLng, zoom);
	map.removeControl(map.zoomControl);
	map.attributionControl.setPrefix("")
	map.scrollWheelZoom.disable();
	map.touchZoom.disable();
	map.boxZoom.disable();
	map.keyboard.disable();
	map.dragging.disable();

	L.tileLayer('{{$mapTiles.Href}}', {
		zoomControl: false,
		attribution: '{{$mapTiles.Description}}'
	}).addTo(map);

	var marker = L.marker(latLng).addTo(map);
</script>
