{{- $outboxBuilder := . -}}
{{- $outbox := .Outbox.Top12.ByPublishDate.Reverse.Slice -}}

{{- if ne 0 (len $outbox) -}}
	{{- $last := $outbox.Last -}}
	{{- $isMyself := .IsMyself -}}

	{{- range $index, $stream := $outbox -}}
		{{- $document := $outboxBuilder.ActivityStream $stream.URL -}}
		<hr>
		<a href="/{{$stream.ID}}" class="block text-plain text-nocolor hover-trigger padding margin-bottom h-entry turboclick">
			<div class="margin-horizontal-auto" style="max-width:600px;">
				{{- if ne "" $stream.Name -}}
					<div class="h-name bold text-black">{{$stream.Name}}</div>
				{{- end -}}
				{{- if ne $stream.IconURL ""}}
					<div style="margin-top:var(--rhythm);">
						<img src="{{$stream.IconURL}}" loading="lazy" class="u-photo rounded" style="border:solid 1px var(--gray40); max-width:100%; object-fit:contain;">
					</div>
				{{- end -}}

				<div class="h-summary text-black">{{$stream.ContentHTML | html }}</div>

				{{- $location := .Location -}}
				{{- if $location.HasAddress -}}
					<div class="h-adr margin-top margin-bottom-lg text-sm text-gray italics">
						<div class="p-street-address">{{$location.Street1}}</div>
						<div class="p-extended-address">{{$location.Street2}}</div>
						<div>
							<span class="p-locality">{{$location.Locality}}</span>
							<span class="p-region">{{$location.Region}}</span>
							<span class="p-postal-code">{{$location.PostalCode}}</span>
						</div>
						<div class="p-country-name">{{$location.Country}}</div>
						<data class="p-latitude" value="{{$location.Latitude}}"></data>
						<data class="p-longitude" value="{{$location.Longitude}}"></data>
					</div>
				{{- end -}}

				<div class="text-sm text-light-gray p-published">{{$stream.PublishDate | humanizeTime}}</div>
			</div>
		</a>
	{{- end -}}

	<div hx-get="{{$outboxBuilder.ProfileURL}}/outbox-list?publishDate=LT:{{$last.PublishDate}}" hx-push-url="false" hx-trigger="intersect once" hx-target="this" hx-swap="outerHTML">
		Loading recent posts...
	</div>

{{- end -}}